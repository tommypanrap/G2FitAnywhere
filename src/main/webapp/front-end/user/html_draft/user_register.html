<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Register - Online Courses & Education Bootstrap5 Template</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/THA105G2/assets/images/favicon.png"
    />

    <!-- CSS
	============================================ -->
    <link rel="stylesheet" href="/THA105G2/assets/css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/vendor/slick.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/vendor/slick-theme.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/sal.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/feather.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/fontawesome.min.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/euclid-circulara.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/swiper.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/magnify.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/odometer.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/animation.css" />
    <link
      rel="stylesheet"
      href="/THA105G2/assets/css/plugins/bootstrap-select.min.css"
    />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/jquery-ui.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/magnigy-popup.min.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/plugins/plyr.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/style.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/style_add.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/joy/register.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/mok/mok_opinion.css" />
    <link rel="stylesheet" href="/THA105G2/assets/css/register-verify.css" />
    <style>
      .hidden {
        display: none;
      }
    </style>
  </head>

  <body class="rbt-header-sticky">
    <!-- Start Header Area  頁首 桌機-->
    <header class="rbt-header rbt-header-10">
      <div class="rbt-sticky-placeholder"></div>
      <div
        class="rbt-header-wrapper header-space-betwween header-transparent header-sticky"
      >
        <div class="container-fluid">
          <div class="mainbar-row rbt-navigation-start align-items-center">
            <div class="header-left rbt-header-content">
              <div class="header-info">
                <div class="logo">
                  <a href="index.html">
                    <img
                      src="/THA105G2/assets/images/logo/fitanywherelogo.png"
                      alt="Education Logo Images"
                    />
                  </a>
                </div>
              </div>
            </div>
            <div class="rbt-main-navigation d-none d-xl-block">
              <nav class="mainmenu-nav">
                <ul class="mainmenu">
                  <li
                    class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber"
                  >
                    <a href="#">TDEE / FFMI計算公式</a>
                  </li>

                  <li
                    class="with-megamenu has-menu-child-item mainmenu-sub not-hamber"
                  >
                    <a href="./g2-blog-list.html">討論區</a>
                  </li>

                  <li
                    class="has-dropdown has-menu-child-item mainmenu-sub not-hamber"
                  >
                    <a href="./student-dashboard.html">會員中心</a>
                  </li>

                  <li
                    class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber"
                  >
                    <a href="./g2-02-course-school.html"
                      >線上課程<i class="feather-chevron-down"></i
                    ></a>
                  </li>

                  <li class="not-hamber">
                    <a href=""
                      ><img src=".//THA105G2/assets/images/bell.png" alt=""
                    /></a>
                  </li>
                  <li class="not-hamber">
                    <a href="./g2-cart.html"
                      ><img src=".//THA105G2/assets/images/cart.png" alt=""
                    /></a>
                  </li>
                  <li class="not-hamber">
                    <a href="" class="button_model feed_back">
                      <img src=".//THA105G2/assets/images/mail.png" alt="" />
                    </a>
                    <div id="lightbox" class="none">
                      <form action="">
                        <article>
                          <div class="article-inner-wrapper">
                            <h1>意見回饋</h1>
                            <div class="feed-back-row1">
                              <p>暱稱</p>
                              <input
                                type="text"
                                placeholder="哈哈哈"
                                value=""
                                disabled
                              />
                            </div>
                            <div class="feed-back-row2">
                              <p>帳號</p>
                              <input
                                type="text"
                                placeholder="jay6666666@gmail.com"
                                value=""
                                disabled
                              />
                            </div>
                            <div class="feed-back-row3">
                              <p>意見回饋</p>
                              <input type="textarea" class="feedback" />
                            </div>
                            <div class="feed-back-button">
                              <button type="button" class="confirm">
                                確認
                              </button>
                              <button type="button" class="btn_model_close">
                                取消
                              </button>
                            </div>
                          </div>
                        </article>
                      </form>
                    </div>
                  </li>
                  <li
                    class="with-megamenu has-menu-child-item position-static mainmenu-sub not-hamber"
                  >
                    <a href="./g2-register.html">登入 / 註冊</a>
                  </li>
                  <li class="hamber">
                    <div class="hamberger">
                      <button class="hamberger-button rbt-round-btn">
                        <i class="feather-menu"></i>
                      </button>
                    </div>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- End Header Area  -->

    <!-- Start Side Vav -->
    <div class="rbt-cart-side-menu">
      <div class="inner-wrapper">
        <div class="inner-top">
          <div class="content">
            <div class="title">
              <h4 class="title mb--0">Your shopping cart</h4>
            </div>
            <div class="rbt-btn-close" id="btn_sideNavClose">
              <button class="minicart-close-button rbt-round-btn">
                <i class="feather-x"></i>
              </button>
            </div>
          </div>
        </div>
        <nav class="side-nav w-100">
          <ul class="rbt-minicart-wrapper">
            <li class="minicart-item">
              <div class="thumbnail">
                <a href="#">
                  <img
                    src="/THA105G2/assets/images/product/1.jpg"
                    alt="Product Images"
                  />
                </a>
              </div>
              <div class="product-content">
                <h6 class="title">
                  <a href="single-product.html">Miracle Morning</a>
                </h6>

                <span class="quantity">1 * <span class="price">$22</span></span>
              </div>
              <div class="close-btn">
                <button class="rbt-round-btn"><i class="feather-x"></i></button>
              </div>
            </li>

            <li class="minicart-item">
              <div class="thumbnail">
                <a href="#">
                  <img
                    src="/THA105G2/assets/images/product/7.jpg"
                    alt="Product Images"
                  />
                </a>
              </div>
              <div class="product-content">
                <h6 class="title">
                  <a href="single-product.html">Happy Strong</a>
                </h6>

                <span class="quantity">1 * <span class="price">$30</span></span>
              </div>
              <div class="close-btn">
                <button class="rbt-round-btn"><i class="feather-x"></i></button>
              </div>
            </li>

            <li class="minicart-item">
              <div class="thumbnail">
                <a href="#">
                  <img
                    src="/THA105G2/assets/images/product/3.jpg"
                    alt="Product Images"
                  />
                </a>
              </div>
              <div class="product-content">
                <h6 class="title">
                  <a href="single-product.html">Rich Dad Poor Dad</a>
                </h6>

                <span class="quantity">1 * <span class="price">$50</span></span>
              </div>
              <div class="close-btn">
                <button class="rbt-round-btn"><i class="feather-x"></i></button>
              </div>
            </li>

            <li class="minicart-item">
              <div class="thumbnail">
                <a href="#">
                  <img
                    src="/THA105G2/assets/images/product/4.jpg"
                    alt="Product Images"
                  />
                </a>
              </div>
              <div class="product-content">
                <h6 class="title">
                  <a href="single-product.html">Momentum Theorem</a>
                </h6>

                <span class="quantity">1 * <span class="price">$50</span></span>
              </div>
              <div class="close-btn">
                <button class="rbt-round-btn"><i class="feather-x"></i></button>
              </div>
            </li>
          </ul>
        </nav>

        <div class="rbt-minicart-footer">
          <hr class="mb--0" />
          <div class="rbt-cart-subttotal">
            <p class="subtotal"><strong>Subtotal:</strong></p>
            <p class="price">$121</p>
          </div>
          <hr class="mb--0" />
          <div class="rbt-minicart-bottom mt--20">
            <div class="view-cart-btn">
              <a
                class="rbt-btn btn-border icon-hover w-100 text-center"
                href="#"
              >
                <span class="btn-text">View Cart</span>
                <span class="btn-icon"
                  ><i class="feather-arrow-right"></i
                ></span>
              </a>
            </div>
            <div class="checkout-btn mt--20">
              <a
                class="rbt-btn btn-gradient icon-hover w-100 text-center"
                href="#"
              >
                <span class="btn-text">Checkout</span>
                <span class="btn-icon"
                  ><i class="feather-arrow-right"></i
                ></span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- End Side Vav -->
    <a class="close_side_menu" href="javascript:void(0);"></a>

    <!-- Start breadcrumb Area -->
    <div
      class="rbt-breadcrumb-default ptb--100 ptb_md--50 ptb_sm--30 bg-gradient-1"
    >
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="breadcrumb-inner text-center">
              <h2 class="title">註冊</h2>
              <ul class="page-list">
                <li class="rbt-breadcrumb-item">
                  <a href="index.html">首頁</a>
                </li>
                <li>
                  <div class="icon-right">
                    <i class="feather-chevron-right"></i>
                  </div>
                </li>
                <li class="rbt-breadcrumb-item active">註冊</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Breadcrumb Area -->

    <div id="lightbox-verify" class="hidden">
      <form id="verificationForm" action="" method="post">
        <article>
          <div class="article-inner-wrapper">
            <h1>請輸入驗證碼</h1>
            <div>
              <div
                class="verificationCodeBox article-inner-wrapper-number-input"
              >
                <input type="text" id="verificationCode1" maxlength="1" />
                <input type="text" id="verificationCode2" maxlength="1" />
                <input type="text" id="verificationCode3" maxlength="1" />
                <input type="text" id="verificationCode4" maxlength="1" />
                <input type="text" id="verificationCode5" maxlength="1" />
                <input type="text" id="verificationCode6" maxlength="1" />
              </div>
              <!-- 新增核對驗證碼按鈕 -->
              <p></p>
              <button type="button" id="checkVerificationCode">
                核對驗證碼
              </button>
              <h4></h4>
            </div>

            <div class="article-inner-wrapper-verify-mistake">
              <p>重新寄送驗證碼（暫時沒做）</p>
              <div class="resend">
                <!-- 更新寄送鏈接為按鈕動作 -->
                <button type="button" id="resendVerificationCode">寄送</button>
              </div>
            </div>
          </div>
        </article>
      </form>
    </div>

    <div class="rbt-elements-area bg-color-white rbt-section-gap">
      <div class="container">
        <div class="row gy-5 row--30">
          <div class="col-lg-6">
            <div class="rbt-contact-form contact-form-style-1 max-width-auto">
              <h3 class="title">註冊</h3>
              <form
                class="registerForm max-width-auto"
                method="post"
                action="/THA105G2/user_controller"
              >
                <input type="hidden" name="requestType" value="registerForm" />

                <div class="form-group">
                  <label for="u_name">請輸入中英文姓名</label>
                  <input id="u_name" name="u_name" type="text" />
                  <span class="focus-border"></span>
                </div>

                <div class="register_name_gender">
                  <!-- 性別選單 -->
                  <div class="rbt-modern-select bg-transparent height-45">
                    <label for="u_gender">請選擇性別</label>
                    <select
                      id="u_gender"
                      name="u_gender"
                      class="w-100"
                      required
                    >
                      <option value="" disabled selected>性別</option>
                      <option value="0">男</option>
                      <option value="1">女</option>
                      <option value="2">其他</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="u_nickname"
                    >站內暱稱(5~12字內的英文或數字組合)</label
                  >
                  <input
                    id="u_nickname"
                    name="u_nickname"
                    type="text"
                    maxlength="12"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="u_phone">手機號碼</label>
                  <input
                    id="u_phone"
                    name="u_phone"
                    type="tel"
                    maxlength="10"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="u_mail">電子信箱</label>
                  <input
                    id="u_mail"
                    name="u_mail"
                    type="email"
                    maxlength="50"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="u_password"
                    >密碼(必須包含英文字母和數字且長度6~12字)</label
                  >
                  <input
                    id="u_password"
                    name="u_password"
                    type="password"
                    required
                  />
                  <span class="focus-border"></span>
                </div>

                <div class="form-group">
                  <label for="u_conpassword">確認密碼</label>
                  <input
                    id="u_conpassword"
                    name="u_conpassword"
                    type="password"
                    required
                  />
                  <span class="focus-border"></span>
                </div>

                <div class="form-group focused">
                  <label for="u_birth">生日</label>
                  <input id="u_birth" name="u_birth" type="date" />
                  <span class="focus-border"></span>
                </div>

                <div class="form-submit-group">
                  <button
                    type="button"
                    id="nextStepButton"
                    class="rbt-btn btn-md btn-gradient hover-icon-reverse w-100 submmit-verify"
                  >
                    <span class="icon-reverse-wrapper">
                      <span class="btn-text">下一步 寄送驗證信</span>
                      <span class="btn-icon"
                        ><i class="feather-arrow-right"></i
                      ></span>
                      <span class="btn-icon"
                        ><i class="feather-arrow-right"></i
                      ></span>
                    </span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Start Footer aera -->
    <div
      class="copyright-area copyright-style-1 ptb--20 bg-color-darker g2_footer"
    >
      <div class="container">
        <div class="row align-items-center">
          <div class="col-12">
            <p class="rbt-link-hover text-center color-white-off">
              Fit AnyWhere©
            </p>
          </div>
        </div>
      </div>
    </div>
    <!-- End Footer aera -->

    <!-- Start Copyright Area  -->

    <!-- End Copyright Area  -->
    <div class="rbt-progress-parent">
      <svg
        class="rbt-back-circle svg-inner"
        width="100%"
        height="100%"
        viewBox="-1 -1 102 102"
      >
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
      </svg>
    </div>

    <!-- JS
============================================ -->
    <!-- Modernizer JS -->
    <script src="/THA105G2/assets/js/vendor/modernizr.min.js"></script>
    <!-- jQuery JS -->
    <script src="/THA105G2/assets/js/vendor/jquery.js"></script>
    <!-- Bootstrap JS -->
    <script src="/THA105G2/assets/js/vendor/bootstrap.min.js"></script>
    <!-- sal.js -->
    <script src="/THA105G2/assets/js/vendor/sal.js"></script>
    <script src="/THA105G2/assets/js/vendor/swiper.js"></script>
    <script src="/THA105G2/assets/js/vendor/magnify.min.js"></script>
    <script src="/THA105G2/assets/js/vendor/jquery-appear.js"></script>
    <script src="/THA105G2/assets/js/vendor/odometer.js"></script>
    <script src="/THA105G2/assets/js/vendor/backtotop.js"></script>
    <script src="/THA105G2/assets/js/vendor/isotop.js"></script>
    <script src="/THA105G2/assets/js/vendor/imageloaded.js"></script>

    <script src="/THA105G2/assets/js/vendor/wow.js"></script>
    <script src="/THA105G2/assets/js/vendor/waypoint.min.js"></script>
    <script src="/THA105G2/assets/js/vendor/easypie.js"></script>
    <script src="/THA105G2/assets/js/vendor/text-type.js"></script>
    <script src="/THA105G2/assets/js/vendor/jquery-one-page-nav.js"></script>
    <script src="/THA105G2/assets/js/vendor/bootstrap-select.min.js"></script>
    <script src="/THA105G2/assets/js/vendor/jquery-ui.js"></script>
    <script src="/THA105G2/assets/js/vendor/magnify-popup.min.js"></script>
    <script src="/THA105G2/assets/js/vendor/paralax-scroll.js"></script>
    <script src="/THA105G2/assets/js/vendor/paralax.min.js"></script>
    <script src="/THA105G2/assets/js/vendor/countdown.js"></script>
    <script src="/THA105G2/assets/js/vendor/plyr.js"></script>
    <!-- Main JS -->
    <script src="/THA105G2/assets/js/main.js"></script>

    <script src="/THA105G2/assets/js/mok/mok_opinion.js"></script>
    <script src="/THA105G2/assets/js/register_verify.js"></script>
    <!-- =================================================== -->
    <!-- Eugen -->
    <!-- 基於前端的基本輸入檢查 -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const nextStepButton = document.getElementById("nextStepButton");
        let currentEditingField = null;

        // 欄位定義
        const fields = {
          u_name: document.getElementById("u_name"),
          u_nickname: document.getElementById("u_nickname"),
          u_phone: document.getElementById("u_phone"),
          u_mail: document.getElementById("u_mail"),
          u_password: document.getElementById("u_password"),
          u_conpassword: document.getElementById("u_conpassword"),
          u_birth: document.getElementById("u_birth"),
        };

        // 初始禁用提交按鈕
        nextStepButton.disabled = true;

        // 更新表單有效性
        function updateFormValidity() {
          const isFormValid = Object.values(fields).every(
            (field) => field.dataset.valid === "true"
          );
          nextStepButton.disabled = !isFormValid;
        }

        // 通用欄位檢查函數
        function validateField(field, condition, message) {
          if (field.value.trim() && !condition(field.value)) {
            alert(message);
            field.value = "";
            field.dataset.valid = "false";
          } else {
            field.dataset.valid = "true";
          }
          updateFormValidity();
        }

        // 密碼欄位專用檢查函數
        function validatePasswords() {
          if (
            currentEditingField !== fields.u_password &&
            currentEditingField !== fields.u_conpassword &&
            fields.u_password.value &&
            fields.u_conpassword.value
          ) {
            if (
              fields.u_password.value !== fields.u_conpassword.value ||
              fields.u_password.value.length < 6 ||
              fields.u_password.value.length > 12
            ) {
              alert(
                "密碼必須包含英文字母和數字且長度6~12字，且兩次輸入必須一致"
              );
              fields.u_password.value = "";
              fields.u_conpassword.value = "";
              fields.u_password.dataset.valid = "false";
              fields.u_conpassword.dataset.valid = "false";
              fields.u_password.focus();
            } else {
              fields.u_password.dataset.valid = "true";
              fields.u_conpassword.dataset.valid = "true";
            }
            updateFormValidity();
          }
        }

        // 綁定事件
        Object.values(fields).forEach((field) => {
          field.addEventListener("focus", () => (currentEditingField = field));
          field.addEventListener("blur", () => {
            currentEditingField = null;
            if (field === fields.u_password || field === fields.u_conpassword) {
              validatePasswords();
            } else {
              const condition = getValidationCondition(field.id);
              const message = getValidationMessage(field.id);
              if (field.value.trim()) {
                // 確保欄位有值才進行檢查
                validateField(field, condition, message);
              }
            }
          });
        });

        // 定義每個欄位的檢查條件
        function getValidationCondition(fieldId) {
          switch (fieldId) {
            case "u_name":
              return (value) =>
                /^[\u4e00-\u9fa5]{1,15}$/.test(value) ||
                /^[A-Za-z\s]{1,30}$/.test(value);
            case "u_nickname":
              return (value) => /^[A-Za-z0-9]{5,12}$/.test(value);
            case "u_phone":
              return (value) => /^\d{10}$/.test(value);
            case "u_mail":
              return (value) => /^\S+@\S+\.\S+$/.test(value);
            case "u_birth":
              return (value) =>
                new Date().getFullYear() - new Date(value).getFullYear() >= 18;
            default:
              return () => true; // 密碼的條件在validatePasswords函數中單獨處理
          }
        }

        // 定義每個欄位的錯誤訊息
        function getValidationMessage(fieldId) {
          switch (fieldId) {
            case "u_name":
              return "中文或英文名稱超過長度限制, 請檢查輸入是否正確或聯絡站方!";
            case "u_nickname":
              return "不符合暱稱規範, 請重新輸入!";
            case "u_phone":
              return "手機號碼錯誤, 請重新輸入";
            case "u_mail":
              return "信箱格式錯誤, 請重新輸入";
            case "u_birth":
              return "本站僅限年滿18歲人士註冊!";
            default:
              return ""; // 密碼的錯誤訊息在validatePasswords函數中單獨處理
          }
        }

        // 初始檢查表單的有效性
        updateFormValidity();
      });
    </script>

    <!-- =================================================== -->
    <!-- 基於後端的註冊資料檢查和處理 -->
    <script>
      // 處理註冊表單在按下"寄送驗證碼"後會送往後端儲存在session並顯示彈窗
      document
        .getElementById("nextStepButton")
        .addEventListener("click", function () {
          var formElement = document.querySelector(".registerForm");
          var formData = new FormData(formElement);
          var urlEncodedData = "";
          var urlEncodedDataPairs = [];

          // 將FormData轉換為URL編碼字符串
          formData.append("requestType", "registerForm");
          for (var pair of formData.entries()) {
            urlEncodedDataPairs.push(
              encodeURIComponent(pair[0]) + "=" + encodeURIComponent(pair[1])
            );
          }
          urlEncodedData = urlEncodedDataPairs.join("&").replace(/%20/g, "+");

          // 發送AJAX請求
          fetch("/THA105G2/user_controller", {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: urlEncodedData,
          })
            .then((response) => {
              if (response.ok) {
                return response.text(); // 或者 response.json() 如果回應是JSON
              }
              throw new Error("Network response was not ok.");
            })
            .then((data) => {
              document
                .getElementById("lightbox-verify")
                .classList.remove("hidden");
              console.log(data); // 處理服務器回應的數據
            })
            .catch((error) => console.error("發生錯誤:", error));
        });

      // 如果要跳過註冊資料輸入直接顯示彈窗
      // document.getElementById('lightbox-verify').classList.remove('hidden');

      // 驗證碼組合
      document.addEventListener("DOMContentLoaded", function () {
        const inputs = document.querySelectorAll(".verificationCodeBox input");

        inputs.forEach((input, index) => {
          input.addEventListener("input", function () {
            // 只允許輸入數字，且最多一個字符
            input.value = input.value.replace(/[^0-9]/g, "").substr(0, 1);

            // 如果當前輸入框有值，且不是最後一個輸入框，則自動跳轉到下一個輸入框
            if (input.value.length === 1 && index < inputs.length - 1) {
              setTimeout(() => inputs[index + 1].focus(), 0); // 在下一個事件循環中執行
            }

            // 組合驗證碼
            let verificationCode = Array.from(inputs)
              .map((i) => i.value)
              .join("");
            // 如果需要在其他地方使用verificationCode，可以在這裡操作
            console.log(verificationCode); // 示範：在控制台輸出verificationCode
          });

          // 添加退格鍵的處理，以便用戶更正輸入
          input.addEventListener("keydown", function (e) {
            if (e.key === "Backspace" && input.value === "" && index > 0) {
              // 當輸入框為空，且按下退格鍵時，跳轉到前一個輸入框
              setTimeout(() => inputs[index - 1].focus(), 0); // 在下一個事件循環中執行
            }
          });
        });
      });

      // 比對驗證碼
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("checkVerificationCode")
          .addEventListener("click", function () {
            // 組合驗證碼
            const inputs = document.querySelectorAll(
              ".verificationCodeBox input"
            );
            let verificationCode = Array.from(inputs)
              .map((i) => i.value)
              .join("");

            // 使用POST方法發送驗證碼到後端
            fetch("/THA105G2/user_controller", {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: `requestType=verificationMail&verificationCode=${verificationCode}`,
            })
              .then((response) => response.text())
              .then((data) => {
                if (data === "0") {
                  alert("註冊成功");
                } else if (data === "1") {
                  alert("驗證碼錯誤");
                  // 清空驗證碼表格
                  inputs.forEach((input) => (input.value = ""));
                }
              })
              .catch((error) => console.error("Error:", error));
          });
      });
    </script>
    <!-- =================================================== -->
  </body>
</html>
